<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Account - Dream Team</title>
    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body class="account-body">
    <!-- Navbar -->
    <div class="navbar">
      <div class="logo">DREAM TEAM</div>
      <nav>
        <a href="./dashboard.html">Dashboard</a>
        <a href="./rewards.html">Rewards</a>
        <a href="./leadboard.html">Leaderboard</a>
        <a href="./account.html">Account</a>
      </nav>
    </div>
    <div class="account-container">
      <!-- Header -->
      <div class="account-header">
        <h1>My Account</h1>
        <p id="user-email" style="font-size: 1.1rem; color: #ffcb05">
          Loading...
        </p>
      </div>
      <div class="account-name">
        <h2
          id="full-name-display"
          style="margin: 0.25rem 0 0; color: #fff; font-size: 1.2rem"
        ></h2>
      </div>
      <div class="password-info">
        <p id="password-info" style="margin-top: 0.25rem; color: #dbe9ff">
          Password: â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢
        </p>
      </div>

      <!-- Profile edit section -->
      <div class="profile-section">
        <div class="avatar">
          <img
            id="profile-img"
            src="./images/default-avatar.png"
            alt="Profile"
          />
          <label class="photo-label">
            Change photo
            <input id="profile-photo-input" type="file" accept="image/*" />
          </label>
        </div>

        <div class="profile-edit">
          <div class="field">
            <label for="display-name-input">Display name</label>
            <input id="display-name-input" type="text" />
          </div>

          <div class="field">
            <label for="email-input">Email</label>
            <input id="email-input" type="email" />
          </div>

          <div class="field">
            <label for="username-input">Username</label>
            <input id="username-input" type="text" />
          </div>

          <div class="field">
            <label for="reauth-password"
              >Current password (required to change email)</label
            >
            <input
              id="reauth-password"
              type="password"
              placeholder="Enter current password to confirm email changes"
            />
          </div>

          <div class="actions">
            <button id="save-profile-btn" class="btn btn-primary">
              Save profile
            </button>
          </div>

          <hr />

          <h3>Change password</h3>
          <div class="field">
            <input
              id="current-password"
              type="password"
              placeholder="Current password"
            />
          </div>
          <div class="field">
            <input
              id="new-password"
              type="password"
              placeholder="New password"
            />
          </div>
          <div class="field">
            <input
              id="confirm-new-password"
              type="password"
              placeholder="Confirm new password"
            />
          </div>
          <div class="actions">
            <button id="change-password-btn" class="btn btn-secondary">
              Change password
            </button>
          </div>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="label">Total Points</div>
          <div class="value" id="total-points">0</div>
        </div>
        <div class="stat-card">
          <div class="label">Challenges Won</div>
          <div class="value" id="total-wins">0</div>
        </div>
        <div class="stat-card">
          <div class="label">Players Unlocked</div>
          <div class="value" id="players-unlocked">0</div>
        </div>
      </div>

      <!-- Unlocks Section -->
      <div class="section">
        <h2>ðŸ”“ Premium Players Unlocked</h2>
        <div class="unlock-list" id="unlocks-list">
          <div class="empty-message">Loading unlock status...</div>
        </div>
      </div>

      <!-- Next Unlock Section -->
      <div class="section">
        <h2>ðŸŽ¯ Next Unlock Progress</h2>
        <div class="unlock-progress">
          <label class="label" id="next-unlock-label">Loading...</label>
          <div class="bar">
            <div class="fill" id="next-unlock-fill" style="width: 0%">
              <span id="next-unlock-text">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="button-group">
        <button class="btn btn-primary" onclick="resetProgress()">
          Reset Progress
        </button>
        <button
          class="btn btn-secondary"
          onclick="window.location.href='./dashboard.html'"
        >
          Back to Dashboard
        </button>
      </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast-root" aria-live="polite" aria-atomic="true"></div>

    <script type="module" src="./js/account.js"></script>
  </body>
</html>
